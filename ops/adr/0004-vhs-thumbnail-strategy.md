## 0004: VHS ノードのサムネイル取得方針（暫定停止）

### 状況

- Load Video など標準系ノードは DOM 上に video/img/canvas が存在し、
  UI表示と同じサムネイルを DOM から取得できる。
- 一方 VHS 系ノードは DOM 内に img/canvas/video が存在せず、
  `data-node-id` にも紐づかないため、DOM からの取得が不可能だった。
- 取得を API 経由に寄せる案（`/api/vhs/viewvideo` / `/api/view`）は、
  URL パラメータの揺れ（`force_size=...x?` など）と生成タイミングに依存し、
  失敗や遅延が多かった。
- サーバ側サムネ生成（ffmpeg で 1 フレーム PNG）も試したが、
  ファイル解決/パス取得の不確実性があり、運用まで至らなかった。

### 決定

- VHS ノードのサムネ取得は一旦 **無効化** する。
- サムネは標準動画ノードのみ対応とし、VHS ノードは対象外とする。

### 理由

- VHS サムネは DOM 取得も API 取得も不安定で、
  プレビュー/エクスポートの重さ・失敗の主因になっていた。
- 目的は「安定したスクショ/エクスポート」であり、
  不安定な経路を残すより明示的に切る方が全体品質が上がる。

### 影響

- VHS ノードのサムネは表示されない（プレースホルダー扱い）。
- Load Video など標準系は引き続き DOM から取得可能。

### 今後の選択肢（再実装するなら）

1. VHS 側プラグイン改修：
   - DOM に img/canvas を出し `data-node-id` で紐づける。
   - DOM 経由取得が可能になり最も堅牢。
2. サーバ側サムネ API：
   - ComfyUI 本体/拡張で「確実に1フレームPNG」を返すルートを追加。
   - フロントは単純に PNG を読むだけで軽量。

### 補足

- VHS 由来の API 取得は 404/invalid response を連打しやすく、
  ブラウザ全体の遅延につながるため現状は採用しない。
